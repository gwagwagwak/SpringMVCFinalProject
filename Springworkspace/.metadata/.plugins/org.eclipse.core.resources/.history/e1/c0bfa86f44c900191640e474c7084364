<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<!-- <mapper namespace="QnaVO"> -->
<mapper namespace="qna">
	
	<!-- Use type aliases to avoid typing the full classname every time. -->
	<resultMap id="QnaVOResult" type="QnaVO">
		<result property="q_no" column="q_no" />
		<result property="q_title" column="q_title" />
		<result property="q_content" column="q_content" />
		<result property="q_writer" column="q_writer" />
		<result property="q_divide" column="q_divide" />
		<result property="q_date" column="q_date" />
		<result property="q_complete" column="q_complete" />
		<result property="q_replytype" column="q_replytype" />
		<result property="q_private" column="q_private" />
	</resultMap>

	<select id="getQna" parameterType="int" resultType="oracle.java.nomyBatis3.model.QnaVO">
		select q_no,
		q_title, q_content,
		q_date, q_complete, q_replytype, q_private from qna
		where q_no = #{q_no}
	</select>
	
	<select id="getQnaList" resultType="oracle.java.nomyBatis3.model.QnaVO">
		select q_no, q_divide, q_title, q_writer, q_date, q_complete
		from qna
		order by q_no desc
	
<!-- 
	아이디 대신 이름이 나오고 싶을 때 
		select q_no, q_divide, q_title, q_writer, q_date, q_complete
		from qna q, member m
		where q.q_writer=m.m_email
		order by q_no desc
 -->		
	</select>
	<insert id="insertQna">
 		insert into qna (q_no, q_title, q_content, q_writer, q_divide, q_date, q_replytype, q_complete, q_private)
 		values (seq_qna.nextval, #{q_title}, #{q_writer}, #{q_divide}, #{q_date}, #{q_replytype}, '답변미완료', #{q_private})
	</insert>
	

	<select id="getTotalQnaCount" resultType="int">
		select count(*) from
		qna
	</select>

	<select id="getIncompleteQnaCount" resultType="int">
		select count(*)
		from qna 
		where q_complete='답변미완료'
	</select>

	<select id="getCompleteQnaCount" resultType="int">
		select count(*) from
		qna 
		where q_complete='답변완료'
	</select>

</mapper> 




<!-- <select id="getQnaList" resultType="list<QnaVO>"> select q_no, q_title, 
	q_content, q_date, q_complete, q_replytype, q_private from qna </select> 
	<select id="getQnaIncompleteList" resultType="list<QnaVO>"> select q_no, 
	q_title, q_content, q_date, q_complete, q_replytype, q_private from qna where 
	q_complete='답변미완료' </select> <select id="getQnaCompleteList" resultType="list<QnaVO>"> 
	select q_no, q_title, q_content, q_date, q_complete, q_replytype, q_private 
	from qna where q_complete='답변완료' </select> -->
